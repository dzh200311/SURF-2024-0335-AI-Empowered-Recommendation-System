<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Example</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <!-- Tailwind CSS CDN -->
    <link href="./../../css/output.css" rel="stylesheet">
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">





<div class="flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8">
    <div class="sm:mx-auto sm:w-full sm:max-w-md">
        <img class="mx-auto h-10 w-auto" src="../../images/wechat_pay.png" alt="Your Company">
    </div>

    <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-[500px] ">
        <div class="bg-white px-6 py-12 shadow sm:rounded-lg sm:px-12">
            <form class="space-y-6" action="#" method="POST">

                <div class="grid grid-cols-2 gap-y-2 text-left">
                    <div class="text-gray-400">Amount:</div>
                    <div class="text-gray-800">$30</div>
                    <div class="text-gray-400" >Order:</div>
                    <div class="text-gray-800" id="order">1928465h0x3</div>
                    <div class="text-gray-400">Description:</div>
                    <div class="text-gray-800">EasyEat order</div>
                </div>


                <div class="mb-4 border-2 rounded-lg border-gray-300 p-4">

                    <div id="qrcode" ></div>

                </div>

                <div>
                    <button id="return" class="flex w-full justify-center rounded-md bg-gray-100 px-3 py-1.5 text-sm font-semibold leading-6 text-green-600 shadow-sm hover:bg-gray-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 border-2 border-green-600">
                        < Return to Merchant
                    </button>
                </div>



            </form>

        </div>
    </div>


    <p class="text-sm text-gray-500 mt-4">
        This page is for academic presentation only, not for commercial use
    </p>
</div>




<script src="../../config.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" integrity="sha512-CNgIRecGo7nphbeZ04Sc13ka07paqdeTu0WR1IM4kNcpmBAUSHSQX0FslNhTDadL4O5SAGapGt4FodqL8My0mA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>

    $('#return').click(function(){
        window.close()
    })

    function getQuery(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }

    var order_id = getQuery('order_id');

    document.querySelector('#order').textContent = order_id;

    var qr = new QRCode('qrcode', {
        text: `http://${API_BASE_URL}:8080/subPage/Payment/wechat_payment?order_id=` + order_id, // Replace with your URL server: 120.26.136.194
        width: 350,
        height: 350
    });
</script>


</body>
</html>
